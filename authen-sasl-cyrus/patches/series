encode-no-more-than-MAX_OUTBUF
correct-write-return-value